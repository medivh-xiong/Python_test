import requests
import datetime
import time


headers = {
    'User-Agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 14_4 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Mobile/15E148 MicroMessenger/8.0.32(0x18002038) NetType/4G Language/zh_CN',
    'Accept': '*/*',
    'Accept-Language': 'zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2',
    # 'Accept-Encoding': 'gzip, deflate, br',
    'content-type': 'application/x-www-form-urlencoded',
    'mtgsig': '{"a1":"1.1","a2":1706848481855,"a3":"2843ux0706vy5z16yz9x1705v995z33y81z5vyx69wy9795864v28400","a5":"zn4Y7xWaNYjU5uJYAUJ8Vrd6g0WJTdeVhI==","a6":"h1.5I+nSNma22NeqosObCofaynMfftLBy6gt6nTaRjrnHKHpODRXsVW0XrFaCy8hjOxmjA3Y+3xdZRs2oLrNjbBMPTzS5oWw0d4eIWjgNENZvh4m9RVMusCcpkUqVMYR1O4rRIsWrKsu58Jymw94sS1tlFlUlw1i4uaXCfjq5QwaqaOtB4NV18YFtOja6va2B7+VVQFnqsrBxAej/6VaclVkOXhjQ3QKoQuBsqYBBljbX7L+sQbzjxsFUWSe1TJ7ItTzRUBWsHXC7b2BX6FIL1wGrg==","x0":4,"d1":"9f54e71e6acbf0300c3e4b27f59f1723"}',
    'Origin': 'https://market.waimai.meituan.com',
    'Connection': 'keep-alive',
    'Referer': 'https://market.waimai.meituan.com/',
    'Host': 'promotion.waimai.meituan.com',
    'Sec-Fetch-Dest': 'empty',
    'Sec-Fetch-Mode': 'cors',
    'Sec-Fetch-Site': 'same-site',
    # Requests doesn't support trailers
    # 'TE': 'trailers',
}

params = {
    'k': '117242',
    'yodaReady': 'h5',
    'csecplatform': '4',
    'csecversion': '2.4.0',
}

data = {
    'positionCityId': '1',
    'uuid': 'b45290bce1ed497a8a6a.1706777495.1.0.0',
    'visitCityId': '1',
    'playWaySecrets': '5a00bebcc5',
    'userId': '1501510245',
    'sourceType': 'MEI_TUAN',
    'weixinCode': '',
    'voucherSourceType': 'OUTER_APP',
    'requestTime': '1706848481270',
    'nonceRandom': 'd08ac3f1-af02-a408-db2d-5506891012b9',
    'requestSign': 'cGxheVdheVNpZ24sTVRjd05qZzBPRFE0TVRJM01DeGtNRGhoWXpObU1TMWhaakF5TFdFME1EZ3RaR0l5WkMwMU5UQTJPRGt4TURFeVlqaz0=',
    'mini_program_token': 'AgGkI6Wbsoe8XX5jFcfghtU1Oy7X2fISn9rpFfTaWp_3cfymGA5nDcvNysnNdpfS7NqJmLRxZAm63wAAAAC3HQAARfuMfZyKzOwj5kIThiN4DwctKcCaQ9fw6AK9hhEgtP70fGd3bgWVxw0qhH1mMl2i',
    'cubeActivityUrl': 'https://i.meituan.com/awp/hfe/block/4aef8dcfaabf56153153/117242/index.html',
    'cubeActivityId': '117242',
    'RiskForm': 'eyJ1dWlkIjoiYjQ1MjkwYmNlMWVkNDk3YThhNmEuMTcwNjc3NzQ5NS4xLjAuMCIsInRvdWNoUG9pbnQiOiIyMDQsMTI5OCIsImNhbXBhaWduUGxhdGZvcm0iOjMsInBhcnRuZXIiOjIsImFwcCI6LTEsIm5ld0FwcEZsYWciOjEsImN1YmVDYW1wYWlnbklkIjoxMTcyNDIsIm1hZ2ljQ3ViZUNhbXBhaWduaWQiOiI1YTAwYmViY2M1IiwiaXNWaXNpdGVkUGFnZSI6MCwicGxhdGZvcm0iOjMsImg1X2ZpbmdlcnByaW50IjoiSDVkZnBfMi40LjBfdHR0dF8reENubFl0dkRrczA1aXpFMTBzalcwdG94V0FLS3kwRk5CeHNHR3M0WVhON3NuWE1DR0JNbzhveEVXSmx2MGM3QUU2WHpaT1lNeGJSOTBaalRYblZlTFJzNTlOYzhuK2hndjBMQVhvWUYvVWdxaTAwaVJjNXh6amV0VGJ4VnMrY05BbktTYS9nNEFjVHBVeVdSbERFTUVWcm5qUTBHU2pvd3FoY1dCbjRoUVI3SDVJSHRua3BmL25LUFM2d1k5UFV5MkxKYmdOdDRKUFFaeEZxc1dIK2k2RkFHSW8wSXI0K0czVWVqTGhOYVN6R0dhTnZNSzZpaVlSaXlhbnRLcDllS3hFenQrWExMUXpYYW9FenRHM2RCU1VmNDNoV3N6UEFza0hXYnhxRm9YU2xzL0Y5VFdhN3VaYmJmQ0huZmdkYnhPWXc5ZThLaXEwditBdVA1c3Fmd3hINUJSRHpvbVlZZWdIbXZYZjV4Rm9TZDVZMkQ4Tzk3aU5xWkRuUkxRb01CaEVGV1J3V0RQTXk2YkRuRUZXazZMUklraHRtT1MxTlhweDBOdy9IL3NCOWdaUFp4QlFscm45VjZoMGh4QTIvUGF2ZnF5VWhzQ3RUbmF0NjMxc2xIM0RiV29KMUUwY1NsUDZSSXV2QzhaaktPcDlNaEptdStVSkhZUk1NcnA1VXNVN2U1akJ5ZEVyMzQrZHgzUm5iOUk2T1ZwWWdJNFhMbmxMaUdOWXl5eGx4Nm1DckI4b2dPQ3FaVEZ6OXd6UHBNVnRUYjdFUTB2a0M3bS9zbzQ0L2JzR2R3eGNVVXlZbElLeEpFdVE3Q2d2S0tTZUZQS0pPOTYrUENBNjAzM1dKUnd5V2U4N01wUVNRa0I5WURHMlduQzhidGFxaHFrdCszR05UMC92NFRTZTlVYUh0bVMxZE4ydDVZLzY5cmI3OVFoMkRNeUVpTEtsOG1zTUlZLzg5Z24rT1ZmdkozSW1WcExFWVBqMStJKzZYSDdqQ2ZSdTluaEphN0doVzZKbGZhdGw2d0ZtN1o1L3hEeVpqZHpOZkI1MEF5UG5NdzJJSVZwVE9TaG5vK1llK2I4eXRxZGRCVGFOVlZJTDVpeXV0T2tuQ0pLczhReHlKV2NVR29xRlR1UFhJWXg2a05YSlVJLzl1djF0V2srSEpMMWlCN0xKRk0rME5wcVE0aDdxbVg0c0Y3eVZaU0NDclZRdk43ZFJZMEl4RStFeXhGaVlrbmUxWVdNS1JEczZ1MDhSQTF2ODNLUXFjcmtjemdwc09tWVJ3VmtaSXJGemFNaWRIWG1WNXROVjVhaENmTTB2djVMcUcrVEF1bHliSjN6Y0hVZkZTdWZoWTBOL0NGb2tZc1hhbDYzWWxXYXJxV2dkeFJBWHR6S3lDYXRVS0tHaGZtby9BRVZFU2hYeEVmbnczbjRxVkRrcUl3YXFvNFFMZGZKL0JOSWtQNlhtYWc5dGgwd1NSd2tDNm1TZFQ1VXAzdjBPcnVhOWdaYWw2UnJwY05hSkVQd21KZjROZ0N5Um91NncxbXFnWG1obG83bTdEVUxHRmduMkVZQTdZaGpyS2VvbktOaXBqV3dmOHAvd1RKTmQ3WUJmcWYwZFNhaFNLbU1heW9qM1cydEFNTnZiVDdYSEl0UnJUM0dReTVrZFJieUVialpWT1ZkSTlnR0NjYjE5Q3lmWjhRYVRBM0RXbzZSaVFaRzFxOFkxZHNDMnV0R3BkOXJMNkhFWkIyN1Fxc0VrdnVCYzFER0cxYmhLMnUzK1EraHhKUG5HLzArQXRiSm12a0pxZWJyUWdjVUNhSXA2V3BLbDZoc2JvN25NWmJHckhzK3pJNHpEZFpid1pZeXpUd3FYS3gyOHVJS1V5ZmlwSDFTZ2pVVXczUkxKQ3ZRL2czQUtqK2RlNnJyK1ROWnVURG4vTlVJSmhpc1NGQlRtQnNpWkN6dGFCUkdyYWpuNmVqaXpCWDZHdGhJdWxoRmlYOEJIZFYyazBiemdMYzh5Q2xpRWdRU1c0c2t1dWVhOXVET0hRdURnblZsbm1KTkVSVXppUHJDWmx0cVM2akVMTDR6b1ZpQndTRWNFSEhJVmNwRHdMTXo5eUt1MDhWcUhtdnRDOWphSUtpZ1dENnB2MjhORjc5N0haVzhnTWJmbUNZck1JVlNVazV5a3ZmOSs3QXNvZlVENFl0dlhua0JhODIycHQycWtpcERiUWFLSHc3ZlBYdWZIdmlzdy9GbTlXQkVSbVgrN0JGZUp3RUVSMXhTdytHYUJrSzFVN1dTU3lBZ0U4Nit6OEJCTXJPM3k0UFJiM1lSQjdDaFNBY0pFWVZWUVRtem5LRU83VXN4TmxHb1BWaC9MUG1BMmh2STZ2eHdVQlJZZitmanJIRE1kcmJTclRwUHRzd3N0a29lanc1SU12S3hud1dqQkc1TnJyTE5jWEpzQlo4Tmd5Y1loeUVaaFdqM2hmUnd3RG5uVnJqYm5tNmkvN1YvWEdiVlB5bCtKVGZqK0tMWmROK3dxWElna3JlTzRPRCtnL1N1MHZIQldXazI0RGJ4b2toRUpRaUdsQzVzdkJEQm4vYUpwajFNWC8rbDdYMUZBR0YwWHVyaXc5WjFlRGtsSHdaRXo4ckcvWTBodTdYVC9CTnIwMzlFTWZEZW9vTTVpMExhZUgrVlpCeWEwZldENFl3WnRpd0c4STNZdlgyWHVXWEJhdnBxd2dER3hlMG1MUlBJNlhxak82VDRIREtKWW1WQlFwWjlId05wSEdYUWdiT3BPZVJiV3A1di8xS2czNkFiR0w0UTJScTZ3T0dqUWh0SmZ6anYzaE9XSGtuQVNqUzhsWnVFeEI2RmV1UVIxVnhwSXRRMUNNazlxZHpqK1BLNkRsZWgrS2xCdGFrcFZvWHkzUG5aZXppQUl2eDlaQkl1SVdrV2lOemk1aVBxbk9nNTY2a09PRDRhTW9JUEVqMy96TEFWaWdCZDgxcEJHY0EzeVBTT081R3RuS29YUmFCNVBvMlF4eDFWdXA1TUZUdG5HZExBNUtVVTl2Mnh5cnRmVXowRzVURlA4MzgwYmc0YmhGaUdvSHFGUTZnOUpkYVBGMStoelBqa2IwV1dzVWJnTWtGeEJpVlVlWDJoTDFKQk9kUGtnN2JuaG9vSi92Q2U2NjlFMWhqSDZyQWhpU1Vic1hvY1YwVlptWm84WjZjRXkwd0R4NDJRM2dXditLUTM1K21tOFlHUWRSQndvRkNHWlFqYUZsR0R6SVRHSE91WUVuZWtUZEwzQlg4UDlPSzFVZm5EU3JQS2VMZm0wcU9vYXE1TlI5OGkxRUJMSzlyQkkrTUczNkV1Qk1iUHovVXF6V3h1Q2M5QWZNWEF5bVpVZyt3dEtjUGpocVJaWWhCRjN2YmpzUlRFUW05djllUzNyVEpmNVZCTEtrWHJrWFlPaTA4amhEWXF6V0FheTZHR0J1QVhNelJ4amhqZHRqSmIwaHRua3B4WkI1dFVkcE5kL3NYbm45ZWNobndUUjNSR2tRZEhSMTBsL0pHUFZxN0Z0UWVlOERpWkFDQ2VFLy9BblozcThUbGlEakFjVG1FTWZXWkhka3NrM2JkZk5qSnUvai9GcnFJclBTOXJNVnVkMDMrNkRLN08zVVpheUtoWmtNOHJMNVB5UndKNVgvYW5vbFdHSFd2Wkd2dXB1WHI2K0twU0pBZ2RnaEY0dnYwcG52UGhkUHNvOWN1TmN1VjhsVkFwSVhGQTdETUoySDVVTWdTLzZNNFVKRFJSUm44NzYvY2VIQWxGVDd6dkhtTFM3dVorMHlxZWY5bEJPTDZ3aExldVE3V0YyTXQreXh4cnhPSHdrZGlwYkgzdU92UHdqYTVad2dPanhaUEFSY1FaNXU1K21yN2JvenM4dHNMUGE0WTFvM0dXblRDWGdaUWFETkIyTWwyWWIxWVU3eElEc2FzTHNMN1ZMQWhXYmF0YzMyaVU2M0h5WHhDMTFCM0RmckZpMm9hWkc3VzRRMGxjMFF3dEEyRy9NSWFHazhiL1lFeThFNlVnR2IrdDFvK1djZVQ0Y3Ywa1puNG1HSFNMRDlNczBuU2kyRmZnakk4UkEzRW83KzV0RWJqcnBSYU9kcWtpbGh4M25JNzFjajFYVFhKbWtvZ01HL1RNdGNIaUVZT0QyS2J0VXo0K05YZzFZTlZWbXBsWDU4ZS91bGhYYndUMmNScWVNSnpRUjVnZTNwTlRkNFBOU0RLUEplWGM3UUlja0J1TUJiYkJjMm41WjZkNllnZzFEb2FYMDRZT3VMdmhielJzbXJUbklHelZtc1c4SUJjVTFPTjBzZ05aRDd6S1dGRXBSN3BYTUVzK3preUZ5M0NvVEduT2xjTmpIbHZMRWd3UmNKN2I5ZE1Wdk84TUxWWUZDVUNiQjBOaWc2a0dzRzNXbmxwYWt0YzhJWlZOczUwL25OZ1JmVzliaENBNkg0RU1yKzVnMUJDZjJQWDZDem9tQT0ifQ==',
}

response = requests.post('https://cube.meituan.com/topcube/api/toc/playWay/sendCoupon', params=params, headers=headers, data=data)
print(response.text)