import requests
import time
import datetime

cookies = {
    '__jda': '165946495.1709528223499522069957.1709528223.1709528223.1709530418.2',
    '__jdv': '122270672%7Cdirect%7C-%7Cnone%7C-%7C1709528223499',
    '__jdc': '165946495',
    'shshshfpa': '65101128-16de-7757-61d7-8534154b6058-1709528223',
    'shshshfpx': '65101128-16de-7757-61d7-8534154b6058-1709528223',
    'shshshfpb': 'BApXeYIn8BOtA5r845JmZ49Me7EOujdGCBksThQxu9xJ1Mhxv-IO2',
    'jcap_dvzw_fp': 'M--Mo_PjodLAbOPMrnpd24dezMIJIQR9a5CLoVDv5KSS6YyvaCVwK8mvwk9KmHfr1F49zFUSzxm3R3FMNyxFQw==',
    '__jdu': '1709528223499522069957',
    'areaId': '12',
    'ipLoc-djd': '12-904-0-0',
    '3AB9D23F7A4B3CSS': 'jdd03VRGLVSOMLDWYIYHL3V4E6VLEXRIFFMXRAKX22222NKJUBYPAVWCQ2OGP4UL27VAWIC2AIALCW3ERZRCYZECHIZ6KLEAAAAMOA72Q5BYAAAAADS6IJ2EIJ3EOM4X',
    'PCSYCityID': 'CN_320000_320100_0',
    'TrackID': '1RnJz_oOWUPGTJ0j3rjsiGxHtb24NTcdwPtMZI3eMEp6b8sMzryNrk7sPo_7L4hywgvZujnDXg1HQZ_zTVghBnEslT6dq58yi7OqTKFyldEUCWFP8MS-aYBmMgXkYfycwI6jGwEHfAJakEqws3xJiFw',
    'thor': 'D722FD6AA8EAAECCEF3E684776707C7DA9C3E38875EE02D75B38EDEF70EDEAF627AB4B53A9AC431F3BABE54427A0FAFFA036DAEA18D40FBA4E517132F88F0201D8FADC1B70F6B9A11BB0822FC52BAC107F16B4F63C5E13CF5B612839950239BFB58FC35BC00526E6036300530EB68D30DAECEC8687DD83A2BC9E531C539D5ED2EB356ACB2B9EB91F1EEFC2BB9618BF413663A30411E575EF635135319FB02454',
    'flash': '2_N3xjiYHt7lc1SutwXC7DaZM8xFeyPxfwm3JH62QjfN4Qw8gTKaX7lV6FYhTT8add3BSvwNDBamB0iiJJJkH1YOjTNNNdZHHuE-AGDPkkWQe*',
    'pinId': '7JO5GEhhODJIi3Oh5-DqmLV9-x-f3wj7',
    'pin': 'jd_7aa9586c0aeb5',
    'unick': 'jd_153660rjcv',
    'ceshi3.com': '201',
    '_tp': '3a8Tp8VzkImjyB1fRKmuRNnf9LknLkQv74x4meNdnNs%3D',
    '_pst': 'jd_7aa9586c0aeb5',
    'mba_muid': '1709528223499522069957',
    '3AB9D23F7A4B3C9B': 'VRGLVSOMLDWYIYHL3V4E6VLEXRIFFMXRAKX22222NKJUBYPAVWCQ2OGP4UL27VAWIC2AIALCW3ERZRCYZECHIZ6KLE',
    'whwswswws': '',
    '__jdb': '165946495.5.1709528223499522069957|2.1709530418',
    'mba_sid': '17095304231851497313749431005.4',
    'TrackerID': 'sTzl3YSTnrB_u2hgmaGc87QvU5dazOIlDKfGgOjBnwIYp0JOzmQhj1_nOWeDIFMSFrO1be6qIMi1T3gTY_OVtwYzCno143ydk5b4VbeHVSFb-LpaB7a8rJ_FtLHvno2ynH0DPyw9bubcg2woCyvOvQ',
    'pt_key': 'AAJl5V1gADAgabqPEpDJQBFrru2vZOBSGn11uTY7wrycZSqiX53lm-smphz5TVk9vP5rcFB7F08',
    'pt_pin': 'jd_7aa9586c0aeb5',
    'pt_token': '3ojbc3av',
    'pwdt_id': 'jd_7aa9586c0aeb5',
    'sfstoken': 'tk01mb53e1c58a8sMSsyeDNIYzM4o5MTE1bqyilkHKT310W9VCNBxpzWFLFOg7meSWQflgWAmWllxoCoTZeJ4w0fN/5b',
    'wxa_level': '1',
    'retina': '1',
    'cid': '9',
    'wqmnx1': 'MDEyNjM5MXRqNzM5NW50UzswMkYycmE0MU8jKQ%3D%3D',
    'jxsid': '17095304669439908303',
    'appCode': 'ms0ca95114',
    'webp': '1',
    'visitkey': '7589086153636930459',
    'p-request-id': 'jd_7aa9586c0aeb52024030413a6Kv9NOI1D',
    '__jd_ref_cls': 'MPlusCoupon_BackTopExpo',
    '_gia_d': '1',
}

headers = {
    'accept': 'application/json, text/plain, */*',
    'accept-language': 'zh-CN,zh;q=0.9,en;q=0.8,en-GB;q=0.7,en-US;q=0.6',
    # 'content-length': '0',
    'content-type': 'application/x-www-form-urlencoded',
    # 'cookie': 'shshshfpa=1f6d0791-7177-a638-16e0-912f13ebda0f-1686838436; shshshfpx=1f6d0791-7177-a638-16e0-912f13ebda0f-1686838436; __jdc=122270672; wlfstk_smdl=wd81e3c76af9fbwk5ygluq1hhxfbfnhc; TrackID=123LXFsLVPv_aD1TSZodV_RKWppv0qicYk45gkQiD9z-fy5uG0eFmXW_3gVskPr4CFibBfkL3qxhFhMM0hwP-O7xrYa5qK-evVmPT_XRId4QSimy8VdITIk3TkRsErT5J; thor=BF80140138890A11F2001240DE13FB3F3C61C0880504BFA8A1E9BDE57F39C654916E92C224354302368221A1E688C99E19B0F7B19976BBC7A9DB11F33ADDFFCC5925005EB25C7CC164DB997260BE876AA071BE7E2DD0D4ECD6E1A0F5FA831408649CD7C0B9B196912CB529B93CE9D91300152EFC63B1B0911033D1083E7BF5012EAEBF7E6FFB3BA0232E6CD99895C9D1; flash=2_PmQ5kGMeVIcCbv18IU-WcAG9GfmkNou59pMeqk8K7NIijKkfjzOfPqpfIYVWjdft1OhVVF2RYganenx49U78Y5jUomVKIvXpuSwm63xiyBs*; pinId=9zvM1MUZPR30TcKyARJfCQ; ceshi3.com=201; 3AB9D23F7A4B3C9B=NPPS7IISON5FYWJALA7EQSXJAQUD3OT6Y6X2MCVZJYKXVHOYYCKKSBEJX35PNLRVUVZIDAQ3O6HROSR3N52PSWFB5Y; mba_muid=1686838433663639890327; jcap_dvzw_fp=UeYIIynEEJWouMXVtNTHBqmdiMP5kI5VIY0PBlYjIQUMFPGJ168a4-6Snj-gnlum-3Eh6_b8kCO-YY08m4-DrQ==; whwswswws=; webp=1; visitkey=57921556875773160; b_dpr=1.1979166269302368; b_webp=1; joyya=1699626482.1699626953.34.1e4x5eb; appCode=ms0ca95114; share_cpin=; share_open_id=; share_gpin=; shareChannel=; source_module=; erp=; b_avif=1; unpl=JF8EAKhnNSttWU9RVRpXHkESTVxRW1gMSkcFOmRRUgpdTl1QTAYbF0R7XlVdWBRKFB9ubxRUVVNPVw4fBysSEHtdVV9dD0MTA2hkNWRdWUpUBBwLGBsSe15Ublw4SxAKaG4HXVhaSVMCGQUZGhlDXFZdWzhKJwNnYDVkbVl7VAQbAxMiEktcVV9YDk8TC18sa1UQWExdAhIAEhcSSVpTXFoKQx4LbmUGUm1Ze1c; retina=0; TrackerID=ssk88iSdQtUirbKouQtpMoaZPfWBgmryyBrFXVLuFLnOEO9DTzKuyncKfd8_3sAFl55pNa2QLZkj5EOtK7RgrV7yZCA_E62_TMt5QBqslmFfT88pYU8E2peEXYOitNeG; pt_key=AAJlxhKcADBeGpnkVFqijrtxT1dcXw4VKE-SH8ack5NJhmeKvWNhmqP0HedL_zWuErASBNnc2tg; pt_pin=15951003078_p; pt_token=itsw4zzi; pwdt_id=15951003078_p; __jda=122270672.1686838433663639890327.1686838434.1707479575.1709478378.15; b_dw=2124; b_dh=1038; wxa_level=1; jxsid=17094784078531391600; __jdv=122270672%7Ckong%7Ct_1001695162_%7Cjingfen%7C054a0d4b37044450a7d2e7f448df514e%7C1709478408136; PPRD_P=EA.17053.1.1-UUID.1686838433663639890327; wqmnx1=MDEyNjM1MXQvZC85NjdNbDBuIDBXOylsSzMgTWllIG0zLmY1Ni8wMUZmYWFCNFFFUylGKUg%3D; autoOpenApp_downCloseDate_jd_homePage=1709478413394_1; cid=3; cd_eid=jdd03NPPS7IISON5FYWJALA7EQSXJAQUD3OT6Y6X2MCVZJYKXVHOYYCKKSBEJX35PNLRVUVZIDAQ3O6HROSR3N52PSWFB5YAAAAMOATM7SVAAAAAADL3NPPQQOZ45WMX; __wga=1709478421775.1709478408134.1707479584777.1690097163506.2.4; jxsid_s_t=1709478421842; jxsid_s_u=https%3A//my.m.jd.com/; sc_width=2138; shshshfpb=BApXedzXSB-tAm6mBgzBIjKQp-FioLWvVB8TCgxl89xJ1P40OJNOHwkq43HyiDJbdLJtd1g; plusCustomBuryPointToken=1709478429710_4020; ipLoc-djd=12_904_3376_0; 3AB9D23F7A4B3CSS=jdd03NPPS7IISON5FYWJALA7EQSXJAQUD3OT6Y6X2MCVZJYKXVHOYYCKKSBEJX35PNLRVUVZIDAQ3O6HROSR3N52PSWFB5YAAAAMOAUFMOPIAAAAACULYDOJHLJIWVQX; _gia_d=1; p-request-id=15951003078_p2024030323UUg2uNLBrz; __jdb=122270672.17.1686838433663639890327|15.1709478378; mba_sid=17094783782468239298913245430.17; __jd_ref_cls=MPlusCoupon_Confirm',
    'origin': 'https://plus.m.jd.com',
    'referer': 'https://plus.m.jd.com/coupon/index',
    'sec-fetch-dest': 'empty',
    'sec-fetch-mode': 'cors',
    'sec-fetch-site': 'same-site',
    'user-agent': 'Mozilla/5.0 (iPhone; CPU iPhone OS 16_6 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/16.6 Mobile/15E148 Safari/604.1 Edg/123.0.0.0',
    'x-referer-page': 'https://plus.m.jd.com/coupon/index',
    'x-rp-client': 'h5_1.0.0',
}

target_time = datetime.datetime(2024, 3, 4, 16, 0, 0)
time_diff = (target_time - datetime.datetime.now()).total_seconds()
if time_diff > 0:
    time.sleep(time_diff)

response = requests.post(
    'https://api.m.jd.com/api?functionId=coupon_receiveDayCoupon_v2&functionId=coupon_receiveDayCoupon_v2&loginType=2'
    '&loginWQBiz=&appid=plus_business&body=%7B%22platform%22:3,%22eventId%22:%22MPlusCoupon_Get%22,'
    '%22eid%22:%22VRGLVSOMLDWYIYHL3V4E6VLEXRIFFMXRAKX22222NKJUBYPAVWCQ2OGP4UL27VAWIC2AIALCW3ERZRCYZECHIZ6KLE%22,'
    '%22fp%22:%2265352cb85a1e41bf5ca71d676e54b623%22,'
    '%22activityId%22:%22qyb_1061%22%7D&scval=&_=1709481608436&x-api-eid-token'
    '=jdd03VRGLVSOMLDWYIYHL3V4E6VLEXRIFFMXRAKX22222NKJUBYPAVWCQ2OGP4UL27VAWIC2AIALCW3ERZRCYZECHIZ6KLEAAAAMOA72Q5BYAAAAADS6IJ2EIJ3EOM4X',
    cookies=cookies,
    headers=headers,
)
print(response.text)
